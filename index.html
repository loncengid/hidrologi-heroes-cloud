<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Hidrologi Heroes â€“ Lacak si Tirta</title>

<style>
body{margin:0;font-family:Arial,system-ui;background:#eaf3ff;color:#123}
header{background:#4da3ff;color:#fff;padding:16px;text-align:center}
h1{margin:0;font-size:22px}
main{padding:16px;padding-bottom:80px}
.card{
  background:#fff;border-radius:18px;
  padding:18px;margin-bottom:16px;
  box-shadow:0 6px 14px rgba(0,0,0,.1)
}
button{
  width:100%;padding:14px;margin-top:10px;
  border:none;border-radius:14px;
  font-size:18px;font-weight:bold;
  background:#4da3ff;color:#fff;cursor:pointer
}
button.secondary{background:#8bc34a}
input{
  width:100%;padding:12px;margin-top:6px;margin-bottom:10px;
  border-radius:12px;border:1px solid #ccc;font-size:16px
}
.choice{margin:8px 0}
.footer{
  position:fixed;bottom:0;left:0;right:0;
  background:#fff;padding:10px;
  display:flex;gap:10px;
  box-shadow:0 -4px 10px rgba(0,0,0,.1)
}
.footer button{font-size:14px;padding:10px}
.badge{
  display:inline-block;padding:6px 12px;
  background:#e0f2ff;border-radius:999px;
  font-size:14px;margin-bottom:12px
}
</style>
</head>

<body>

<header>
  <h1>Hidrologi Heroes</h1>
  <div>Lacak si Tirta, Air Ajaib ğŸ’§</div>
</header>

<main id="app"></main>

<div class="footer">
  <button id="btnHome">ğŸ  Home</button>
</div>

<script>
/* ================= STATE ================= */
let page = "home";
let belajarStep = 0;
let quizIndex = 0;
let score = 0;

/* ================= DATA SISWA ================= */
function getSession(){
  return JSON.parse(localStorage.getItem("hh_student") || "null");
}
function saveSession(s){
  localStorage.setItem("hh_student", JSON.stringify(s));
}

/* ================= SOAL KUIS ================= */
const quiz = [
 {q:"Evaporasi adalah...",o:["Hujan","Penguapan","Awan"],a:1},
 {q:"Hujan disebut...",o:["Evaporasi","Presipitasi","Kondensasi"],a:1},
 {q:"Awan terbentuk karena...",o:["Kondensasi","Hujan","Aliran"],a:0},
 {q:"PLTMH adalah...",o:["Tenaga uap","Tenaga air","Tenaga angin"],a:1},
 {q:"Air mengalir ke sungai disebut...",o:["Aliran","Uap","Awan"],a:0},
 {q:"Banjir terjadi karena...",o:["Air berlebih","Air habis","Angin"],a:0},
 {q:"Siklus air dimulai dari...",o:["Penguapan","Hujan","Awan"],a:0},
 {q:"Energi air digunakan untuk...",o:["Mainan","Listrik","Makanan"],a:1},
 {q:"Uap air naik karena...",o:["Panas","Hujan","Es"],a:0},
 {q:"Air penting bagi...",o:["Manusia","Hewan","Semua"],a:2},
];

const materi = [
 "Evaporasi: air menguap karena panas matahari.",
 "Kondensasi: uap air berubah menjadi awan.",
 "Presipitasi: hujan turun ke bumi."
];

/* ================= RENDER ================= */
function render(){
  const app = document.getElementById("app");
  app.innerHTML = "";

  /* HOME */
  if(page==="home"){
    app.innerHTML = `
      <div class="card">
        <div class="badge">Aplikasi Edukasi SD</div>
        <button id="mBelajar">ğŸ’ BELAJAR</button>
        <button id="mKuis">ğŸ“ KUIS</button>
        <button id="mDiorama">ğŸ¥ DIORAMA</button>
        <button id="mGuru">ğŸ‘©â€ğŸ« GURU</button>
      </div>`;
    document.getElementById("mBelajar").onclick=()=>{
      belajarStep=0;page="belajar";render();
    };
    document.getElementById("mKuis").onclick=()=>{
      page="data";render();
    };
    document.getElementById("mDiorama").onclick=()=>{
      page="diorama";render();
    };
    document.getElementById("mGuru").onclick=()=>{
      page="guru";render();
    };
  }

  /* BELAJAR */
  if(page==="belajar"){
    app.innerHTML=`
      <div class="card">
        <h3>ğŸ“˜ Belajar Siklus Air</h3>
        <p>${materi[belajarStep] || "Selesai ğŸ‰"}</p>
        <button id="nextBelajar">LANJUT â¡</button>
      </div>`;
    document.getElementById("nextBelajar").onclick=()=>{
      belajarStep++;
      if(belajarStep>=materi.length) page="home";
      render();
    };
  }

  /* DATA SISWA */
  if(page==="data"){
    const s=getSession()||{};
    app.innerHTML=`
      <div class="card">
        <h3>ğŸ§’ Data Siswa</h3>
        <input id="nm" placeholder="Nama" value="${s.name||""}">
        <input id="kl" placeholder="Kelas" value="${s.kelas||""}">
        <button id="btnStartQuiz">Mulai Kuis</button>
      </div>`;
    document.getElementById("btnStartQuiz").onclick=()=>{
      if(!nm.value||!kl.value){alert("Isi nama dan kelas");return;}
      saveSession({name:nm.value,kelas:kl.value,score:null});
      quizIndex=0;score=0;
      page="quiz";render();
    };
  }

  /* KUIS */
  if(page==="quiz"){
    const q=quiz[quizIndex];
    app.innerHTML=`
      <div class="card">
        <h3>${quizIndex+1}. ${q.q}</h3>
        ${q.o.map((o,i)=>`
          <div class="choice">
            <button class="secondary" data-i="${i}">${o}</button>
          </div>`).join("")}
      </div>`;
    document.querySelectorAll("[data-i]").forEach(b=>{
      b.onclick=()=>{
        if(Number(b.dataset.i)===q.a) score++;
        quizIndex++;
        if(quizIndex>=quiz.length){
          const s=getSession();
          s.score=score+"/"+quiz.length;
          saveSession(s);
          page="hasil";
        }
        render();
      };
    });
  }

  /* HASIL */
  if(page==="hasil"){
    const s=getSession();
    app.innerHTML=`
      <div class="card">
        <h3>ğŸ‰ Hasil Kuis</h3>
        <p>${s.name} (${s.kelas})</p>
        <h2>${s.score}</h2>
        <button id="done">Selesai</button>
      </div>`;
    document.getElementById("done").onclick=()=>{
      page="home";render();
    };
  }

  /* DIORAMA */
  if(page==="diorama"){
    app.innerHTML=`
      <div class="card">
        <h3>ğŸ¥ Diorama</h3>
        <button onclick="console.log('[DIORAMA] Evaporasi')">Evaporasi</button>
        <button onclick="console.log('[DIORAMA] Kondensasi')">Kondensasi</button>
        <button onclick="console.log('[DIORAMA] Presipitasi')">Presipitasi</button>
      </div>`;
  }

  /* GURU */
  if(page==="guru"){
    const s=getSession();
    app.innerHTML=`
      <div class="card">
        <h3>ğŸ‘©â€ğŸ« Monitoring Guru</h3>
        <p>Skor terakhir siswa:</p>
        <h2>${s?.score||"-"}</h2>
        <p>Versi: NISEEF v12</p>
      </div>`;
  }
}

/* HOME BUTTON */
document.getElementById("btnHome").onclick=()=>{
  page="home";render();
};

/* INIT */
render();
</script>

</body>
</html>
